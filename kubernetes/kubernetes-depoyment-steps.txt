#get kubernetes config
az aks get-credentials --resource-group mnt-infra-kubernetes --name mnt-iot-kubernetes

# set kubernetes secrets for container registry
kubectl create secret docker-registry mntcr --docker-server=https://mntcr.azurecr.io --docker-username=mntcr --docker-password=id0jI1+cdvhLJMNgnsgYVZfwajI1fZE0 --docker-email=siim@soft.ee

kubectl create secret generic certs-volume-secret --from-env-file=.env.storageaccount

kubectl apply -f StorageClass.yaml
kubectl apply -f PersistentVolume.yaml
kubectl apply -f PersistentVolumeClaim.yaml

kubectl create configmap devicereader-common-config --from-env-file=.env
kubectl create configmap devicereader-i1-config --from-env-file=.env.instance
kubectl create secret generic devicereader-secrets --from-env-file=.env.secure


kubectl apply -f Pod.yaml